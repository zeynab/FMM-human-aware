\section{Introduction}


Human aware navigation is a key problem in social robotics. If robots need to be actively used in natural social environments, one of the main components required is navigation. Robust navigation principles incorporating humans in the environment need to be developed. Robots have to navigate in environments shared with humans and the quality of their movement strongly influences  how their intelligence is perceived~\cite{Althaus2004}. Conventionally, comfort, naturalness and scalability, are the main focus of such human aware navigation techniques ~\cite{Kruse2013}. In this work, we attempt to model one essential aspect of human aware navigation which has been overlooked in this area, uncertainty in the perception.

%Robots will progressively become part of the work spaces and habitats of humans.Despite where they are located, in home environments or hospitals as assistants, in factories as co-workers or as guides in supermarkets, a key behavior which they all share is navigation.Robots have to navigate in environments shared with humans and the quality of their movement strongly influences  how their intelligence is perceived~\cite{Althaus2004}. Consequently, new methods for robot navigation in the presence of humans are being studied extensively. Kruse et al.~\cite{Kruse2013} present a thorough survey of such methods where they identify comfort, naturalness and scalability as the three key issues addressed by the existing human-aware robot navigation methods so far. %(last 2 sentences taken from  RV's paper)
%Hence socially-aware navigation which pays special consideration to people 


%Presence of humans in an environment should be properly perceived by a robot as a requirement for a socially-aware path planner that takes into consideration individual humans and possible social interactions taking place in the environment. This information can be obtained by an external source such as an overhead camera or can be attained using on-board sensors of the robot. while there are advantages and disadvantage to both cases, on-board perception allows for a fully autonomous and independent robot that relies only on itself for taking decisions about the world. Moreover, there are environments which do not permit the use of external infrastructures required for providing the requisite perception, due to reasons such as privacy or security issues or etc. Therefore, providing the required perception for human-aware navigation with on-board sensors is a desirable characteristic for a robot which helps integration of such systems into real-world environments.  \dv{This paragraph is irrelavant to motivating our work. lets stick with only the story of uncertainity in perception}

Presence of humans in an environment should be properly perceived by a robot as a requirement for a socially-aware path planner that takes into consideration individual humans and possible social interactions taking place in the environment. However, perception will never be perfect and is affected by various elements such as the movement of the robot, movement of the person, complexity of the environment in terms of occlusions, etc. Due to the approximate nature of the models and the less than perfect detectors available, we often can only provide estimate of location of the people with significant uncertainty. Any planning algorithm which needs to rely on real perception sources must be able to use this less than perfect estimates. The assumption of having perfect information about the position and orientation of people at all times, is common in the state of the art research in this area, where the main focus is on the planning itself. However, moving to real applications, poses serious challenges in terms of noisy perception information and high uncertainties, that need to be addressed and modeled in a human-aware approach.

Different perception sources for person detection and tracking, have different levels of uncertainty and accuracy. While, there exist trackers able to perform this task with cm-level accuracy, others have a much larger uncertainty associated to them. If a human-aware approach, could take this into account, the same planning method could easily be reused even when the source of perception changes. As an example while overhead cameras can provide position information of people with good accuracy, when moving to on-board perception for a mobile robot, this accuracy and the associated uncertainty will largely change. This is even more significant, if tracking is done using an ultra-wide-band (UWB) tag. So, for more robustness and effectiveness, a human-aware navigation method, should be able to handle all these situations without undergoing major changes. This is possible, by adaptively changing the social costs.

%However, perception will never be perfect and is affected by various elements such as the movement of the robot, movement of the person, complexity of the environment in terms of occlusions, etc. Unlike other works which choose to ignore this very important aspect of the uncertainty in perception, we propose a model which computes the uncertainty of the location and orientation of the people in an environment. We aim to study, how this factor should influences the social costs used by the path planner and how taking this into account the resulting trajectories will be improved in terms of social acceptability.

%\dv{Discussion of proxemics makes it harder to follow the narrative. Need to restructure the introduction from here on. The story is broken. first two paragraphs motivated human aware navigation and real perception systems. what now? how do you think we should continue the story? - i am unclear on this. how does proxemics fit into the narrative? transition lines are very important which connect the story.}

One important concept which is used in numerous studies~\cite{Mumm2011,Takayama2009,Walters2011,ferrer2013robot} in this area is virtual space around a person that is mutually respected by other humans, called \textit{proxemics}~\cite{Hall1969}.
Based on this concept, depending on the relationship and the interaction that exists between humans, people choose different social distances relating to intimate, personal, social or public contexts.%Changes in the expected distance may indicate dislike if it is too large or cause discomfort if it is too small. 


Social costmaps are a common way to model this principle and have been used in various studies in the field. There are many factors that have a role in shaping this costmap, but the proxemics distance is mainly addressed. Other factors such as speed of a person's movement, gender, age, etc. have also been considered in the literature, but are much less common. To the best of our knowledge, there does not exit any work on including uncertainty of perception in this problem. If the center of the costmap, which indicates the position of the person in not deterministically known, the costmap can not correctly model the social costs and hence the social path planning could fail in finding an appropriate socially compliant path. This problem becomes much more critical in real applications where robustness is vital for succeeding under different conditions.  

%\dv{again. this paragraph needs to be worked on. I don't think we should suddenly switch to human robot interaction. thats not what this paper is dealing with. Uncertainity in human aware navigation. thats all we care about.}
%As stated in~\cite{gomez2013social}, recent work in the human-robot interaction domain can be divided in three categories of 1) human-robot proxemics, 2) human-aware planning and navigation, and 3) robot-to-human approaching and behaving. In this work we focus mostly on the second category using the concepts from human-robot proxemics. %Human-aware path planning has been an area of interest particularly in the recent years. 

In this research we introduce a novel social path planning approach based on the fast marching method (FMM)~\cite{sethian1999fast}. FMM has been proven to be successful in real domestic spaces with high complexity\cite{ventura2015}. However, we add a social component to the aforementioned method by augmenting it with social costmaps \textemdash based on proxemics principles~\cite{kirby2009companion}\textemdash~around individual people which correspond to speedmaps for the FMM method. %\dv{next line should be pushed to background}%
There have previously been a number of research papers which have address social path planning~\cite{gomez2014fast,gomez2013social} using FMM. %However, their model is based on known person position and orientation in simulation. 

%\dv{needs more work.}
In the work of ~\cite{gomez2014fast}, a theoretical framework for sub-problems of social path planning is presented and an extended model for engaging groups of people is proposed by using a special version of fast marching square planning method~\cite{valero2013fast}. Nonetheless, the information about humans are considered to be given and noiseless, while only simulations have been used to show the effectiveness of the proposed method for static people. We are interested in investigating the same problem in real-world scenarios with the challenges that exist therein. Particularly, in the case of moving people, while the perception is subject to uncertainty. 
%We believe that uncertainty of perception in social robotics is an important topic which to our knowledge is very little explored.
We believe that uncertainty of perception in social robotics, is an important topic which to our knowledge, has not been the subject of many notable studies. There is a dedicated chapter in \cite{correa2014uncertainty} on local planning with uncertainty, however this is not considered in a social context. The sources of uncertainty in~\cite{correa2014uncertainty} are the position of the robot and the obstacles, and the partially known motion of moving obstacles and perception of people and the uncertainty in person and group detection and tracking has not been investigated.

Another interesting aspect of human-aware navigation problem which should be deeply investigated is knowing how to decide when to replan. As a perquisite, We have studied whether accounting for social costs in the local planner can be effective. In basic navigation, the global path planner, provides a long term plan and local planner deals with dynamic obstacles and collision avoidance for making it possible to reach the goal. It is common to have social path planners considerate of people's presence and activities, but this is seldom taken into account for local path planners. Of course, this reactive short horizon control does not exactly have a social nature but it is interesting to see, how accounting for social costs in this low level is reflected on the higher level navigational behavior of the robot. By delegating part of the work to the local planner, the cost of global planning which is much larger than the local planning can be reduced. However, for the best behavior, a hybrid approach that adopts the use of social planners on both level is more effective.    

The remainder of this article is organized as follows. In section~\ref{sec:background} we introduce the background for this work. Section~\ref{sec:algorithms} explains the methods and models. In section~\ref{sec:results}, we show the results of our simulations and real robot experiments and finally, section~\ref{sec:conclusion} concludes this work.

%\paragraph{Story}  - Quantify uncertainity in perception. Use this for generating cost maps adaptively. FMM creates plans using this uncertainity model.



%\dv{Modelling and accurately computing the location and orientation of a person in an environment is a hard problem. Typically, in state of the art people tracking methods, a bayesian approach is used.}


% \paragraph{Motivation and approach} - Perception will never be perfect. Unlike other works which choose to ignore this very important aspect of the uncertainty in perception, we propose a model which computes the uncertainty of the location and orientation of multiple people in an environment. We use this model to make informed choices about the cost function for navigation which is then used by a state of the art navigation model using FMM. We dynamically replan based on the perception information available. The key idea is that in cases where the perception is unreliable, we need to make sure that the robot navigates prioritizing safety over social norms.

% paragraph{Note} Active perception is also important. The robot movement causes uncertainty which can be actively reduced by taking paths which improve the perception information.



%\subsubsection{Additional Stuff}
%However, contrary to approach we propose in this paper, these works are only validated in computer simulation.Comfort is defined as a relative state in which the body is relieved of unpleasant sensory or environmental stimuli [25]